{"ast":null,"code":"import _classCallCheck from \"C:\\\\lessons\\\\React\\\\kmb-11\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\lessons\\\\React\\\\kmb-11\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\lessons\\\\React\\\\kmb-11\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\lessons\\\\React\\\\kmb-11\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\lessons\\\\React\\\\kmb-11\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\lessons\\\\React\\\\kmb-11\\\\src\\\\Components\\\\EditProfilePage\\\\EditFormContainer.js\";\nimport React from 'react';\nimport { reduxForm } from \"redux-form\";\nimport EditProfileForm from \"./EditProfileForm\";\nimport { connect } from \"react-redux\";\nimport { changeUpdatePhotoStatus, changeUpdatePhotoStatusCreator, editDataStatusCreator, editProfileDataThunk, getProfileInformationThunk, updatePhotoSaga } from \"../../Reducers/profilePageReducer\";\n\nvar validate = function validate(values) {\n  var errors = {};\n\n  if (!values.username) {\n    errors.username = 'Required';\n  } else if (values.username.length > 15) {\n    errors.username = 'Must be 15 characters or less';\n  }\n\n  if (!values.email) {\n    errors.email = 'Required';\n  } else if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(values.email)) {\n    errors.email = 'Invalid email address';\n  }\n\n  if (!values.age) {\n    errors.age = 'Required';\n  } else if (isNaN(Number(values.age))) {\n    errors.age = 'Must be a number';\n  } else if (Number(values.age) < 18) {\n    errors.age = 'Sorry, you must be at least 18 years old';\n  }\n\n  return errors;\n};\n\nvar FormUnderRedux = reduxForm({\n  // a unique name for the form\n  form: 'editProfile'\n})(EditProfileForm);\n\nvar EditFormContainer =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(EditFormContainer, _React$Component);\n\n  function EditFormContainer() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, EditFormContainer);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(EditFormContainer)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.submit = function (values) {\n      var newData = {\n        aboutMe: values.redAboutMe,\n        contacts: {\n          facebook: values.redFacebook,\n          github: values.redGitHub,\n          instagram: values.redInstagram,\n          mainlink: values.redMainLink,\n          twitter: values.redTwitter,\n          vk: values.redVk,\n          website: values.redWebSite,\n          youtube: values.redYoutube\n        },\n        lookingForAJob: values.redLookingForAJob,\n        lookingForAJobDescription: values.redLookingForAJobDescription,\n        fullName: values.redFullName\n      };\n\n      _this.props.editProfileData(newData);\n    };\n\n    return _this;\n  }\n\n  _createClass(EditFormContainer, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.props.getProfileInformation();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (this.props.updatePhotoStatus) {\n        this.props.changeUpdatePhotoStatus(null, null);\n      }\n\n      if (this.props.editDataStatus) {\n        this.props.changeEditDataStatus(null, null);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(FormUnderRedux, Object.assign({\n        onSubmit: this.submit\n      }, this.props, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return EditFormContainer;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    initialValues: {\n      redFullName: state.profileData.fullName,\n      redLookingForAJobDescription: state.profileData.lookingForAJobDescription,\n      redLookingForAJob: state.profileData.lookingForAJob,\n      redAboutMe: state.profileData.aboutMe,\n      redFacebook: state.profileData.contacts.facebook,\n      redGitHub: state.profileData.contacts.github,\n      redInstagram: state.profileData.contacts.instagram,\n      redMainLink: state.profileData.contacts.mainLink,\n      redTwitter: state.profileData.contacts.twitter,\n      redVk: state.profileData.contacts.vk,\n      redWebSite: state.profileData.contacts.website,\n      redYoutube: state.profileData.contacts.youtube\n    },\n    enableReinitialize: true,\n    updatePhotoStatus: state.profileData.updatePhotoStatus,\n    updatePhotoErrorText: state.profileData.updatePhotoErrorText,\n    editDataErrorText: state.profileData.editDataErrorText,\n    editDataStatus: state.profileData.editDataStatus\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    editProfileData: function editProfileData(newData) {\n      dispatch(editProfileDataThunk(newData));\n    },\n    getProfileInformation: function getProfileInformation() {\n      dispatch(getProfileInformationThunk());\n    },\n    update: function update(e) {\n      var file = e.target.files[0];\n\n      if (file) {\n        var data = new FormData();\n        data.append('file', file);\n        dispatch(updatePhotoSaga(data));\n      }\n    },\n    changeUpdatePhotoStatus: function changeUpdatePhotoStatus(status, errorText) {\n      dispatch(changeUpdatePhotoStatusCreator(status, errorText));\n    },\n    changeEditDataStatus: function changeEditDataStatus(status, errorText) {\n      dispatch(editDataStatusCreator(status, errorText));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EditFormContainer);","map":{"version":3,"sources":["C:\\lessons\\React\\kmb-11\\src\\Components\\EditProfilePage\\EditFormContainer.js"],"names":["React","reduxForm","EditProfileForm","connect","changeUpdatePhotoStatus","changeUpdatePhotoStatusCreator","editDataStatusCreator","editProfileDataThunk","getProfileInformationThunk","updatePhotoSaga","validate","values","errors","username","length","email","test","age","isNaN","Number","FormUnderRedux","form","EditFormContainer","submit","newData","aboutMe","redAboutMe","contacts","facebook","redFacebook","github","redGitHub","instagram","redInstagram","mainlink","redMainLink","twitter","redTwitter","vk","redVk","website","redWebSite","youtube","redYoutube","lookingForAJob","redLookingForAJob","lookingForAJobDescription","redLookingForAJobDescription","fullName","redFullName","props","editProfileData","getProfileInformation","updatePhotoStatus","editDataStatus","changeEditDataStatus","Component","mapStateToProps","state","initialValues","profileData","mainLink","enableReinitialize","updatePhotoErrorText","editDataErrorText","mapDispatchToProps","dispatch","update","e","file","target","files","data","FormData","append","status","errorText"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport {reduxForm} from \"redux-form\";\r\nimport EditProfileForm from \"./EditProfileForm\";\r\nimport {connect} from \"react-redux\";\r\nimport {\r\n    changeUpdatePhotoStatus, changeUpdatePhotoStatusCreator, editDataStatusCreator,\r\n    editProfileDataThunk,\r\n    getProfileInformationThunk,\r\n    updatePhotoSaga\r\n} from \"../../Reducers/profilePageReducer\";\r\n\r\nconst validate = values => {\r\n    const errors = {}\r\n    if (!values.username) {\r\n        errors.username = 'Required'\r\n    } else if (values.username.length > 15) {\r\n        errors.username = 'Must be 15 characters or less'\r\n    }\r\n    if (!values.email) {\r\n        errors.email = 'Required'\r\n    } else if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(values.email)) {\r\n        errors.email = 'Invalid email address'\r\n    }\r\n    if (!values.age) {\r\n        errors.age = 'Required'\r\n    } else if (isNaN(Number(values.age))) {\r\n        errors.age = 'Must be a number'\r\n    } else if (Number(values.age) < 18) {\r\n        errors.age = 'Sorry, you must be at least 18 years old'\r\n    }\r\n    return errors\r\n}\r\n\r\nlet FormUnderRedux = reduxForm({\r\n    // a unique name for the form\r\n    form: 'editProfile'\r\n})(EditProfileForm)\r\n\r\n\r\n\r\nclass EditFormContainer extends React.Component {\r\n\r\n    submit = (values) => {\r\n        let newData = {\r\n            aboutMe: values.redAboutMe,\r\n            contacts: {\r\n                facebook: values.redFacebook,\r\n                github: values.redGitHub,\r\n                instagram: values.redInstagram,\r\n                mainlink: values.redMainLink,\r\n                twitter: values.redTwitter,\r\n                vk: values.redVk,\r\n                website: values.redWebSite,\r\n                youtube: values.redYoutube\r\n            },\r\n            lookingForAJob: values.redLookingForAJob,\r\n            lookingForAJobDescription: values.redLookingForAJobDescription,\r\n            fullName: values.redFullName\r\n        }\r\n        this.props.editProfileData(newData)\r\n    }\r\n\r\n    componentWillMount() {\r\n        this.props.getProfileInformation()\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if(this.props.updatePhotoStatus) {\r\n            this.props.changeUpdatePhotoStatus(null, null)\r\n        }\r\n\r\n        if(this.props.editDataStatus) {\r\n            this.props.changeEditDataStatus(null, null)\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return <FormUnderRedux onSubmit={this.submit} {...this.props} />\r\n    }\r\n\r\n}\r\nconst mapStateToProps = (state) => {\r\n\r\n    return {\r\n        initialValues: {\r\n            redFullName: state.profileData.fullName,\r\n            redLookingForAJobDescription: state.profileData.lookingForAJobDescription,\r\n            redLookingForAJob: state.profileData.lookingForAJob,\r\n            redAboutMe: state.profileData.aboutMe,\r\n            redFacebook: state.profileData.contacts.facebook,\r\n            redGitHub: state.profileData.contacts.github,\r\n            redInstagram: state.profileData.contacts.instagram,\r\n            redMainLink: state.profileData.contacts.mainLink,\r\n            redTwitter: state.profileData.contacts.twitter,\r\n            redVk: state.profileData.contacts.vk,\r\n            redWebSite: state.profileData.contacts.website,\r\n            redYoutube: state.profileData.contacts.youtube\r\n        },\r\n        enableReinitialize: true,\r\n        updatePhotoStatus: state.profileData.updatePhotoStatus,\r\n        updatePhotoErrorText: state.profileData.updatePhotoErrorText,\r\n        editDataErrorText: state.profileData.editDataErrorText,\r\n        editDataStatus: state.profileData.editDataStatus\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        editProfileData: (newData) => {\r\n            dispatch(editProfileDataThunk(newData))\r\n        },\r\n        getProfileInformation: () => {\r\n            dispatch(getProfileInformationThunk())\r\n        },\r\n        update: (e) => {\r\n            let file = e.target.files[0];\r\n            if (file) {\r\n                let data = new FormData();\r\n                data.append('file', file);\r\n                dispatch(updatePhotoSaga(data))\r\n            }\r\n        },\r\n        changeUpdatePhotoStatus: (status, errorText) => {\r\n            dispatch(changeUpdatePhotoStatusCreator(status, errorText))\r\n        },\r\n        changeEditDataStatus: (status, errorText) => {\r\n            dispatch(editDataStatusCreator(status, errorText))\r\n        }\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(EditFormContainer);\r\n"]},"metadata":{},"sourceType":"module"}