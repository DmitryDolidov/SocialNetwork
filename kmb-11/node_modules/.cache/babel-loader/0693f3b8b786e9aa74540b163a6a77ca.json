{"ast":null,"code":"import _toConsumableArray from \"C:\\\\lessons\\\\React\\\\kmb-11\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"C:\\\\lessons\\\\React\\\\kmb-11\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport React from 'react';\nimport avatar from \"../Components/Profile/img/avatar.jpg\";\nimport axios from \"../Dall/axios-instance\";\nimport { profileService } from \"../Dall/profile-service\";\nvar initialStateForProfile = {\n  users: [{\n    avatar: avatar,\n    firstName: 'Иван',\n    secondName: 'Стечкин',\n    birthday: '12 января 1990',\n    city: 'Минск',\n    education: 'ВКА им. Можайского',\n    site: 'it-kamasutra.com',\n    status: null,\n    id: null\n  }],\n  statusChangeFlag: false,\n  currentStatus: \"\"\n};\nvar SET_STATUS = 'NETWORK/PROFILE/SET_STATUS';\nvar SET_ID = 'NETWORK/PROFILE/SET_ID';\nvar CHANGE_STATUS = 'NETWORK/PROFILE/CHANGE_STATUS';\nvar ADD_CURRENT_STATUS_TEXT = 'NETWORK/PROFILE/ADD_CURRENT_STATUS_TEXT';\n\nvar profilePageReducer = function profilePageReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialStateForProfile;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  var stateCopy = _objectSpread({}, state);\n\n  stateCopy.users = _toConsumableArray(state.users);\n\n  switch (action.type) {\n    case SET_ID:\n      stateCopy.users[0].id = action.id;\n      return stateCopy;\n\n    case SET_STATUS:\n      stateCopy.users[0].status = action.status;\n      stateCopy.currentStatus = action.status;\n      return stateCopy;\n\n    case CHANGE_STATUS:\n      stateCopy.statusChangeFlag = action.flag;\n      return stateCopy;\n\n    case ADD_CURRENT_STATUS_TEXT:\n      stateCopy.currentStatus = action.textareaObject.target.value;\n      return stateCopy;\n\n    default:\n      return state;\n  }\n}; //Thunks\n\n\nexport var getStatusThunk = function getStatusThunk() {\n  return function (dispatch, getState) {\n    var state = getState();\n    var userId = state.auth.userInfo.userId;\n    axios.get(\"profile/status/\".concat(userId)).then(function (result) {\n      dispatch(setStatus(result.data));\n    });\n  };\n};\nexport var addNewStatusThunk = function addNewStatusThunk() {\n  return function (dispatch, getState) {\n    var state = getState();\n    axios.put('profile/status', {\n      status: state.profileData.currentStatus\n    }).then(function (result) {\n      dispatch(changeStatusCreator(false));\n      dispatch(getStatusThunk());\n      console.log(result);\n    });\n  };\n};\nexport var getProfileInformationThunk = function getProfileInformationThunk() {\n  return function (dispatch, getState) {\n    var state = getState();\n    var result = profileService.getProfileInformation(state.auth.userInfo.userId);\n    console.log(result);\n  };\n}; //action creators\n\nvar setId = function setId(idFromServer) {\n  return {\n    type: SET_ID,\n    id: idFromServer\n  };\n};\n\nvar setStatus = function setStatus(statusFromServer) {\n  return {\n    type: SET_STATUS,\n    status: statusFromServer\n  };\n};\n\nexport var changeStatusCreator = function changeStatusCreator(flag) {\n  return {\n    type: CHANGE_STATUS,\n    flag: flag\n  };\n};\nexport var addCurrentStatusTextCreator = function addCurrentStatusTextCreator(e) {\n  return {\n    type: ADD_CURRENT_STATUS_TEXT,\n    textareaObject: e\n  };\n};\nexport default profilePageReducer;","map":{"version":3,"sources":["C:\\lessons\\React\\kmb-11\\src\\Reducers\\profilePageReducer.js"],"names":["React","avatar","axios","profileService","initialStateForProfile","users","firstName","secondName","birthday","city","education","site","status","id","statusChangeFlag","currentStatus","SET_STATUS","SET_ID","CHANGE_STATUS","ADD_CURRENT_STATUS_TEXT","profilePageReducer","state","action","stateCopy","type","flag","textareaObject","target","value","getStatusThunk","dispatch","getState","userId","auth","userInfo","get","then","result","setStatus","data","addNewStatusThunk","put","profileData","changeStatusCreator","console","log","getProfileInformationThunk","getProfileInformation","setId","idFromServer","statusFromServer","addCurrentStatusTextCreator","e"],"mappings":"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","sourcesContent":["import React from 'react';\nimport avatar from \"../Components/Profile/img/avatar.jpg\";\nimport axios from \"../Dall/axios-instance\";\nimport {profileService} from \"../Dall/profile-service\";\n\nlet initialStateForProfile = {\n    users: [\n        {\n            avatar: avatar,\n            firstName: 'Иван',\n            secondName: 'Стечкин',\n            birthday: '12 января 1990',\n            city: 'Минск',\n            education: 'ВКА им. Можайского',\n            site: 'it-kamasutra.com',\n            status: null,\n            id: null\n        }\n    ],\n    statusChangeFlag: false,\n    currentStatus: \"\"\n};\n\nconst SET_STATUS = 'NETWORK/PROFILE/SET_STATUS';\nconst SET_ID = 'NETWORK/PROFILE/SET_ID';\nconst CHANGE_STATUS = 'NETWORK/PROFILE/CHANGE_STATUS';\nconst ADD_CURRENT_STATUS_TEXT = 'NETWORK/PROFILE/ADD_CURRENT_STATUS_TEXT';\n\nconst profilePageReducer = (state = initialStateForProfile, action) => {\n    let stateCopy = {...state};\n    stateCopy.users = [...state.users];\n    switch (action.type) {\n        case SET_ID:\n            stateCopy.users[0].id = action.id\n            return stateCopy\n        case SET_STATUS:\n            stateCopy.users[0].status = action.status\n            stateCopy.currentStatus = action.status\n            return stateCopy\n        case CHANGE_STATUS:\n            stateCopy.statusChangeFlag = action.flag\n            return stateCopy\n        case ADD_CURRENT_STATUS_TEXT:\n            stateCopy.currentStatus = action.textareaObject.target.value\n            return stateCopy\n        default:\n            return state;\n    }\n};\n\n//Thunks\n\nexport const getStatusThunk = () => {\n    return (dispatch, getState) => {\n        let state = getState();\n                let userId = state.auth.userInfo.userId;\n                axios.get(`profile/status/${userId}`).then(\n                    result => {\n                        dispatch(setStatus(result.data));\n                    }\n                )\n    }\n}\n\nexport const addNewStatusThunk = () => {\n    return (dispatch, getState) => {\n        let state = getState();\n        axios.put('profile/status', {status: state.profileData.currentStatus}).then(\n            result => {\n                dispatch(changeStatusCreator(false));\n                dispatch(getStatusThunk())\n                console.log(result)\n            }\n        );\n    }\n}\n\nexport const getProfileInformationThunk = () => {\n    return (dispatch, getState) => {\n        let state = getState()\n        let result = profileService.getProfileInformation(state.auth.userInfo.userId)\n        console.log(result)\n    }\n}\n\n//action creators\n\nconst setId = (idFromServer) => {\n    return {\n        type: SET_ID,\n        id: idFromServer\n    }\n}\n\nconst setStatus = (statusFromServer) => {\n    return {\n        type: SET_STATUS,\n        status: statusFromServer\n    }\n}\n\nexport const changeStatusCreator = (flag) => ({\n    type: CHANGE_STATUS,\n    flag: flag\n})\n\nexport const addCurrentStatusTextCreator = (e) => ({\n    type: ADD_CURRENT_STATUS_TEXT,\n    textareaObject: e\n})\n\nexport default profilePageReducer;\n"]},"metadata":{},"sourceType":"module"}