{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\lessons\\\\React\\\\kmb-11\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\lessons\\\\React\\\\kmb-11\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _objectSpread from \"C:\\\\lessons\\\\React\\\\kmb-11\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport React from 'react';\nimport avatar from \"../Components/Profile/img/avatar.jpg\";\nimport axios from \"../Dall/axios-instance\";\nimport { profileService } from \"../Dall/profile-service\";\nvar initialStateForProfile = {\n  aboutMe: \"Информация не указана\",\n  contacts: {\n    skype: \"skype\",\n    vk: \"vk.com\",\n    facebook: \"facebook\",\n    icq: \"icq\",\n    email: \"email\",\n    googlePlus: \"gogep\",\n    twitter: \"twitter\",\n    instagram: \"instagra\",\n    whatsApp: \"watsap\"\n  },\n  photos: {\n    small: null,\n    large: avatar\n  },\n  status: \"У вас нет статуса\",\n  lookingForAJob: false,\n  lookingForAJobDescription: 'Ищу работу, знаю это это и это',\n  fullName: null,\n  statusChangeFlag: false,\n  currentStatus: \"\",\n  redProfileError: null,\n  redProfileSuccess: null\n};\nvar SET_STATUS = 'NETWORK/PROFILE/SET_STATUS';\nvar GET_PROFILE_INFORMATION = 'NETWORK/PROFILE/GET_PROFILE_INFORMATION';\nvar CHANGE_STATUS = 'NETWORK/PROFILE/CHANGE_STATUS';\nvar EDIT_DATA = 'NETWORK/PROFILE/EDIT_DATA';\nvar ADD_CURRENT_STATUS_TEXT = 'NETWORK/PROFILE/ADD_CURRENT_STATUS_TEXT';\n\nvar profilePageReducer = function profilePageReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialStateForProfile;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  var stateCopy = _objectSpread({}, state);\n\n  stateCopy.contacts = _objectSpread({}, state.contacts);\n\n  switch (action.type) {\n    case SET_STATUS:\n      stateCopy.status = action.status;\n      stateCopy.currentStatus = action.status;\n      return stateCopy;\n\n    case CHANGE_STATUS:\n      stateCopy.statusChangeFlag = action.flag;\n      return stateCopy;\n\n    case ADD_CURRENT_STATUS_TEXT:\n      stateCopy.currentStatus = action.textareaObject.target.value;\n      return stateCopy;\n\n    case GET_PROFILE_INFORMATION:\n      stateCopy.aboutMe = action.data.aboutMe;\n      stateCopy.contacts = _objectSpread({}, action.data.contacts);\n      stateCopy.lookingForAJob = action.data.lookingForAJob;\n      stateCopy.fullName = action.data.fullName; //дописать, чтобы все бралось из сервера и записывалось в мой стейт\n\n      return stateCopy;\n\n    case EDIT_DATA:\n      console.log(action.newData);\n      stateCopy.contacts.skype = action.newData.redSkype;\n      return stateCopy;\n\n    default:\n      return state;\n  }\n}; //Thunks\n\n\nexport var getStatusThunk = function getStatusThunk() {\n  return function (dispatch, getState) {\n    var state = getState();\n    var userId = state.auth.userInfo.userId;\n    axios.get(\"profile/status/\".concat(userId)).then(function (result) {\n      dispatch(setStatus(result.data));\n    });\n  };\n};\nexport var addNewStatusThunk = function addNewStatusThunk() {\n  return function (dispatch, getState) {\n    var state = getState();\n    axios.put('profile/status', {\n      status: state.profileData.currentStatus\n    }).then(function () {\n      dispatch(changeStatusCreator(false));\n      dispatch(getStatusThunk());\n    });\n  };\n};\nexport var getProfileInformationThunk = function getProfileInformationThunk() {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(dispatch, getState) {\n        var state, data;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                state = getState();\n                _context.next = 3;\n                return profileService.getProfileInformation(state.auth.userInfo.userId);\n\n              case 3:\n                data = _context.sent;\n                dispatch(getProfileInformationCreator(data));\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x, _x2) {\n        return _ref.apply(this, arguments);\n      };\n    }()\n  );\n};\nexport var editProfileDataThunk = function editProfileDataThunk(newData) {\n  return (\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(dispatch, getState) {\n        var state, result;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                state = getState();\n                _context2.next = 3;\n                return profileService.editNewProfileData(newData);\n\n              case 3:\n                result = _context2.sent;\n\n                //сначало отправляются данные из формы на сервер\n                //а здесь уже диспатчим в стейт если все успешно отправилось\n                if (result.data.resultCode === 0) {\n                  //диспатчим данные в наш стейт\n                  dispatch(editProfileDataCreator(newData));\n                } else {\n                  result.data.messages.map(function (error) {\n                    alert(error);\n                  });\n                }\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x3, _x4) {\n        return _ref2.apply(this, arguments);\n      };\n    }()\n  );\n}; //action creators\n\nvar editProfileDataCreator = function editProfileDataCreator(newData) {\n  return {\n    type: EDIT_DATA,\n    newData: newData\n  };\n};\n\nvar setStatus = function setStatus(statusFromServer) {\n  return {\n    type: SET_STATUS,\n    status: statusFromServer\n  };\n};\n\nexport var changeStatusCreator = function changeStatusCreator(flag) {\n  return {\n    type: CHANGE_STATUS,\n    flag: flag\n  };\n};\nexport var addCurrentStatusTextCreator = function addCurrentStatusTextCreator(e) {\n  return {\n    type: ADD_CURRENT_STATUS_TEXT,\n    textareaObject: e\n  };\n};\n\nvar getProfileInformationCreator = function getProfileInformationCreator(dataFromServer) {\n  return {\n    type: GET_PROFILE_INFORMATION,\n    data: dataFromServer\n  };\n};\n\nexport default profilePageReducer;","map":{"version":3,"sources":["C:\\lessons\\React\\kmb-11\\src\\Reducers\\profilePageReducer.js"],"names":["React","avatar","axios","profileService","initialStateForProfile","aboutMe","contacts","skype","vk","facebook","icq","email","googlePlus","twitter","instagram","whatsApp","photos","small","large","status","lookingForAJob","lookingForAJobDescription","fullName","statusChangeFlag","currentStatus","redProfileError","redProfileSuccess","SET_STATUS","GET_PROFILE_INFORMATION","CHANGE_STATUS","EDIT_DATA","ADD_CURRENT_STATUS_TEXT","profilePageReducer","state","action","stateCopy","type","flag","textareaObject","target","value","data","console","log","newData","redSkype","getStatusThunk","dispatch","getState","userId","auth","userInfo","get","then","result","setStatus","addNewStatusThunk","put","profileData","changeStatusCreator","getProfileInformationThunk","getProfileInformation","getProfileInformationCreator","editProfileDataThunk","editNewProfileData","resultCode","editProfileDataCreator","messages","map","error","alert","statusFromServer","addCurrentStatusTextCreator","e","dataFromServer"],"mappings":"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","sourcesContent":["import React from 'react';\nimport avatar from \"../Components/Profile/img/avatar.jpg\";\nimport axios from \"../Dall/axios-instance\";\nimport {profileService} from \"../Dall/profile-service\";\n\nlet initialStateForProfile = {\n    aboutMe: \"Информация не указана\",\n    contacts: {\n        skype: \"skype\",\n        vk: \"vk.com\",\n        facebook: \"facebook\",\n        icq: \"icq\",\n        email: \"email\",\n        googlePlus: \"gogep\",\n        twitter: \"twitter\",\n        instagram: \"instagra\",\n        whatsApp: \"watsap\"\n    },\n    photos: {\n        small: null,\n        large: avatar\n    },\n    status: \"У вас нет статуса\",\n    lookingForAJob: false,\n    lookingForAJobDescription: 'Ищу работу, знаю это это и это',\n    fullName: null,\n    statusChangeFlag: false,\n    currentStatus: \"\",\n    redProfileError: null,\n    redProfileSuccess: null\n};\n\nconst SET_STATUS = 'NETWORK/PROFILE/SET_STATUS';\nconst GET_PROFILE_INFORMATION = 'NETWORK/PROFILE/GET_PROFILE_INFORMATION';\nconst CHANGE_STATUS = 'NETWORK/PROFILE/CHANGE_STATUS';\nconst EDIT_DATA = 'NETWORK/PROFILE/EDIT_DATA';\nconst ADD_CURRENT_STATUS_TEXT = 'NETWORK/PROFILE/ADD_CURRENT_STATUS_TEXT';\n\nconst profilePageReducer = (state = initialStateForProfile, action) => {\n    let stateCopy = {...state};\n    stateCopy.contacts = {...state.contacts};\n    switch (action.type) {\n        case SET_STATUS:\n            stateCopy.status = action.status\n            stateCopy.currentStatus = action.status\n            return stateCopy\n        case CHANGE_STATUS:\n            stateCopy.statusChangeFlag = action.flag\n            return stateCopy\n        case ADD_CURRENT_STATUS_TEXT:\n            stateCopy.currentStatus = action.textareaObject.target.value\n            return stateCopy\n        case GET_PROFILE_INFORMATION:\n            stateCopy.aboutMe = action.data.aboutMe\n            stateCopy.contacts = {...action.data.contacts}\n            stateCopy.lookingForAJob = action.data.lookingForAJob\n            stateCopy.fullName = action.data.fullName\n            //дописать, чтобы все бралось из сервера и записывалось в мой стейт\n            return stateCopy\n        case EDIT_DATA:\n            console.log(action.newData)\n            stateCopy.contacts.skype = action.newData.redSkype\n            return stateCopy\n        default:\n            return state;\n    }\n};\n\n//Thunks\n\nexport const getStatusThunk = () => {\n    return (dispatch, getState) => {\n        let state = getState();\n                let userId = state.auth.userInfo.userId;\n                axios.get(`profile/status/${userId}`).then(\n                    result => {\n                        dispatch(setStatus(result.data));\n                    }\n                )\n    }\n}\n\nexport const addNewStatusThunk = () => {\n    return (dispatch, getState) => {\n        let state = getState();\n        axios.put('profile/status', {status: state.profileData.currentStatus}).then(\n            () => {\n                dispatch(changeStatusCreator(false));\n                dispatch(getStatusThunk())\n            }\n        );\n    }\n}\n\nexport const getProfileInformationThunk = () => {\n    return async (dispatch, getState) => {\n        let state = getState()\n        let data = await profileService.getProfileInformation(state.auth.userInfo.userId)\n        dispatch(getProfileInformationCreator((data)))\n    }\n}\n\nexport const editProfileDataThunk = (newData) => {\n    return async (dispatch, getState) => {\n        let state = getState()\n        let result = await profileService.editNewProfileData(newData) //сначало отправляются данные из формы на сервер\n        //а здесь уже диспатчим в стейт если все успешно отправилось\n        if(result.data.resultCode === 0) {\n            //диспатчим данные в наш стейт\n            dispatch(editProfileDataCreator(newData))\n        } else {\n            result.data.messages.map(error => {\n                alert(error)\n            })\n        }\n\n    }\n}\n\n//action creators\nconst editProfileDataCreator = (newData) => {\n    return {\n        type: EDIT_DATA,\n        newData\n    }\n}\n\nconst setStatus = (statusFromServer) => {\n    return {\n        type: SET_STATUS,\n        status: statusFromServer\n    }\n}\n\nexport const changeStatusCreator = (flag) => ({\n    type: CHANGE_STATUS,\n    flag: flag\n})\n\nexport const addCurrentStatusTextCreator = (e) => ({\n    type: ADD_CURRENT_STATUS_TEXT,\n    textareaObject: e\n})\n\nconst getProfileInformationCreator = (dataFromServer) => {\n    return {\n        type: GET_PROFILE_INFORMATION,\n        data: dataFromServer\n    }\n}\n\nexport default profilePageReducer;\n"]},"metadata":{},"sourceType":"module"}